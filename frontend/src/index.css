/* Import Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

/* Tailwind CSS Directives */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base Styles - Dark Theme */
@layer base {
  html {
    font-family: 'Inter', system-ui, sans-serif;
    scroll-behavior: smooth;
  }

  body {
    @apply bg-dark-100 text-neutral-100 antialiased;
    background: linear-gradient(135deg, #1a1a2e 0%, #16162a 50%, #0a0a1a 100%);
    background-attachment: fixed;
    min-height: 100vh;
  }

  /* Improved focus states for accessibility */
  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-accent-purple;
  }

  /* Custom scrollbar for dark theme */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-dark-200;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-neutral-700 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-neutral-600;
  }
}

/* Component Layer - Premium Dark Theme */
@layer components {
  /* Glass Card styles */
  .card {
    @apply bg-dark-50/60 backdrop-blur-xl rounded-2xl border border-white/10 p-6 
           transition-all duration-300 shadow-card;
  }
  
  .card:hover {
    @apply shadow-card-hover border-white/20;
  }

  .card-glow {
    @apply card;
    box-shadow: 0 0 30px rgba(168, 85, 247, 0.1), inset 0 0 30px rgba(168, 85, 247, 0.05);
  }

  .card-success {
    @apply card border-success-500/30;
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.1);
  }

  .card-warning {
    @apply card border-warning-500/30;
    box-shadow: 0 0 20px rgba(249, 115, 22, 0.1);
  }

  /* Button variants */
  .btn {
    @apply inline-flex items-center justify-center px-5 py-2.5 rounded-xl font-semibold 
           transition-all duration-300 focus-visible:ring-2 focus-visible:ring-offset-2 
           focus-visible:ring-offset-dark-100 transform active:scale-95;
  }

  .btn-primary {
    @apply btn bg-gradient-to-r from-accent-purple to-accent-blue text-white 
           hover:shadow-glow-purple focus-visible:ring-accent-purple;
  }

  .btn-secondary {
    @apply btn bg-dark-200/80 text-neutral-200 border border-white/10
           hover:bg-dark-100 hover:border-white/20 focus-visible:ring-neutral-400;
  }

  .btn-success {
    @apply btn bg-gradient-to-r from-success-500 to-success-400 text-white 
           hover:shadow-glow-green focus-visible:ring-success-500;
  }

  .btn-warning {
    @apply btn bg-gradient-to-r from-warning-500 to-accent-orange text-white 
           hover:shadow-glow-orange focus-visible:ring-warning-500;
  }

  .btn-ghost {
    @apply btn bg-transparent text-accent-purple hover:bg-accent-purple/10 
           focus-visible:ring-accent-purple border border-transparent hover:border-accent-purple/30;
  }

  .btn-glow {
    @apply btn bg-gradient-to-r from-accent-purple via-accent-pink to-accent-orange 
           text-white shadow-glow-purple animate-gradient-x bg-[length:200%_100%];
  }

  .btn-sm {
    @apply px-4 py-2 text-sm rounded-lg;
  }

  .btn-lg {
    @apply px-8 py-4 text-lg;
  }

  /* Badge styles */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide;
  }

  .badge-success {
    @apply badge bg-success-500/20 text-success-400 border border-success-500/30;
  }

  .badge-warning {
    @apply badge bg-warning-500/20 text-warning-400 border border-warning-500/30;
  }

  .badge-alert {
    @apply badge bg-alert-500/20 text-alert-400 border border-alert-500/30;
  }

  .badge-info {
    @apply badge bg-accent-purple/20 text-accent-purple border border-accent-purple/30;
  }

  .badge-neutral {
    @apply badge bg-neutral-700/50 text-neutral-300 border border-neutral-600/30;
  }

  .badge-fire {
    @apply badge bg-gradient-to-r from-accent-orange/20 to-warning-500/20 
           text-accent-orange border border-accent-orange/30;
  }

  /* Input styles */
  .input {
    @apply w-full px-4 py-3 rounded-xl bg-dark-200/60 border border-white/10 text-neutral-100
           focus:border-accent-purple/50 focus:ring-2 focus:ring-accent-purple/20 
           transition-all duration-200 placeholder:text-neutral-500 backdrop-blur-sm;
  }

  /* Progress bar */
  .progress-bar {
    @apply h-2 bg-dark-300/50 rounded-full overflow-hidden backdrop-blur-sm;
  }

  .progress-bar-fill {
    @apply h-full rounded-full transition-all duration-700 ease-out;
  }

  .progress-bar-gradient {
    @apply progress-bar-fill bg-gradient-to-r from-accent-purple via-accent-pink to-accent-orange;
  }

  /* Glassmorphism effect */
  .glass {
    @apply bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl;
  }

  .glass-dark {
    @apply bg-dark-100/80 backdrop-blur-xl border border-white/5 rounded-2xl;
  }

  /* Sidebar navigation */
  .nav-item {
    @apply flex items-center gap-3 px-4 py-3 rounded-xl text-neutral-400 
           hover:bg-white/5 hover:text-neutral-100 transition-all duration-200;
  }

  .nav-item-active {
    @apply bg-accent-purple/10 text-accent-purple font-medium border-l-2 border-accent-purple;
  }

  /* Streak/Fire badge */
  .streak-badge {
    @apply inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full 
           bg-gradient-to-r from-accent-orange/20 to-warning-500/20 
           text-accent-orange font-bold text-sm border border-accent-orange/30;
  }

  /* Momentum ring */
  .momentum-ring {
    @apply relative w-24 h-24;
  }

  .momentum-ring svg {
    @apply w-full h-full transform -rotate-90;
  }

  .momentum-ring-bg {
    @apply stroke-dark-300;
  }

  .momentum-ring-fill {
    @apply transition-all duration-1000 ease-out;
    stroke-linecap: round;
  }

  /* Celebration effects */
  .celebration-glow {
    animation: glow 2s ease-in-out infinite;
  }

  .celebration-bounce {
    animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
}

/* Utilities Layer - Custom utilities */
@layer utilities {
  /* Text gradient */
  .text-gradient {
    @apply bg-gradient-to-r from-accent-purple via-accent-pink to-accent-orange 
           bg-clip-text text-transparent;
  }

  .text-gradient-success {
    @apply bg-gradient-to-r from-success-400 to-accent-cyan bg-clip-text text-transparent;
  }

  .text-gradient-fire {
    @apply bg-gradient-to-r from-accent-orange via-warning-500 to-alert-500 
           bg-clip-text text-transparent;
  }

  /* Glow effects */
  .glow-purple {
    box-shadow: 0 0 20px rgba(168, 85, 247, 0.4), 0 0 40px rgba(168, 85, 247, 0.2);
  }

  .glow-blue {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.4), 0 0 40px rgba(59, 130, 246, 0.2);
  }

  .glow-green {
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.4), 0 0 40px rgba(16, 185, 129, 0.2);
  }

  .glow-orange {
    box-shadow: 0 0 20px rgba(249, 115, 22, 0.4), 0 0 40px rgba(249, 115, 22, 0.2);
  }

  /* Animation delays */
  .animation-delay-100 { animation-delay: 100ms; }
  .animation-delay-200 { animation-delay: 200ms; }
  .animation-delay-300 { animation-delay: 300ms; }
  .animation-delay-500 { animation-delay: 500ms; }
  .animation-delay-700 { animation-delay: 700ms; }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Custom scrollbar style */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.neutral.700') transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 4px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: theme('colors.neutral.700');
    border-radius: 2px;
  }

  /* Gradient borders */
  .gradient-border {
    position: relative;
    background: linear-gradient(135deg, rgba(168, 85, 247, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);
  }

  .gradient-border::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(135deg, rgba(168, 85, 247, 0.5) 0%, rgba(59, 130, 246, 0.5) 100%);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  }
}

/* Custom Animations */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.animate-shimmer {
  background: linear-gradient(
    90deg,
    theme('colors.dark.200') 0%,
    theme('colors.dark.100') 50%,
    theme('colors.dark.200') 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* Tooltip styles */
.tooltip {
  @apply absolute z-50 px-3 py-2 text-sm text-white bg-dark-200 border border-white/10 
         rounded-lg shadow-lg backdrop-blur-xl opacity-0 pointer-events-none transition-opacity duration-200;
}

.tooltip-visible {
  @apply opacity-100;
}

/* Modal overlay */
.modal-overlay {
  @apply fixed inset-0 bg-dark-500/80 backdrop-blur-md z-40;
}

/* Fire emoji animation */
.fire-icon {
  @apply text-2xl;
  animation: fire 0.5s ease-in-out infinite alternate;
  filter: drop-shadow(0 0 8px rgba(249, 115, 22, 0.6));
}

/* Confetti container */
.confetti-container {
  @apply fixed inset-0 pointer-events-none z-50 overflow-hidden;
}

.confetti-piece {
  @apply absolute w-3 h-3 rounded-sm;
  animation: confetti 3s ease-out forwards;
}

/* Streak counter styles */
.streak-counter {
  @apply flex items-center gap-2 px-4 py-2 rounded-full 
         bg-gradient-to-r from-accent-orange/20 to-warning-500/10 
         border border-accent-orange/30;
}

.streak-number {
  @apply text-2xl font-black text-gradient-fire;
}

/* Progress ring */
.progress-ring {
  @apply transform -rotate-90;
}

.progress-ring-circle {
  @apply transition-all duration-1000 ease-out;
  stroke-linecap: round;
}

/* Micro-commitment card */
.mission-card {
  @apply relative overflow-hidden rounded-2xl p-6;
  background: linear-gradient(135deg, rgba(168, 85, 247, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);
  border: 1px solid rgba(168, 85, 247, 0.3);
}

.mission-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  animation: shimmer 3s infinite;
}

/* Heatmap cell colors for dark theme */
.heatmap-green { @apply bg-success-500; }
.heatmap-yellow { @apply bg-warning-500; }
.heatmap-red { @apply bg-alert-500; }
.heatmap-gray { @apply bg-neutral-700; }

/* Celebration overlay */
.celebration-overlay {
  @apply fixed inset-0 z-50 flex items-center justify-center;
  background: radial-gradient(circle, rgba(168, 85, 247, 0.2) 0%, rgba(10, 10, 26, 0.95) 100%);
  backdrop-filter: blur(8px);
}

/* Achievement card */
.achievement-card {
  @apply relative p-8 rounded-3xl text-center;
  background: linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
  border: 2px solid rgba(168, 85, 247, 0.5);
  box-shadow: 
    0 0 60px rgba(168, 85, 247, 0.3),
    0 0 100px rgba(59, 130, 246, 0.2),
    inset 0 0 60px rgba(168, 85, 247, 0.1);
  animation: celebration 0.6s ease-out;
}
